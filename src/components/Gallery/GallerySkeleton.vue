<template>
  <div class="ft-loading-skeleton">
    <div class="ft-skeleton-grid">
      <div
        v-for="i in count"
        :key="'skeleton-' + i"
        class="ft-skeleton-card"
        :style="{ '--sk-index': i - 1 }"
      >
        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π (masonry-feel) -->
        <div class="ft-skeleton-image" :class="`ft-skeleton-img-${((i - 1) % 5) + 1}`">
          <div class="ft-skeleton-paw">{{ paws[(i - 1) % paws.length] }}</div>
        </div>
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="ft-skeleton-content">
          <div class="ft-skeleton-line ft-skeleton-line-title"></div>
          <div class="ft-skeleton-line ft-skeleton-line-subtitle"></div>
          <!-- –•—É–¥–æ–∂–Ω–∏–∫-–ø–∏–ª—é–ª—è -->
          <div class="ft-skeleton-artist-pill">
            <div class="ft-skeleton-avatar"></div>
            <div class="ft-skeleton-line ft-skeleton-line-artist"></div>
          </div>
          <!-- –¢–µ–≥–∏ -->
          <div class="ft-skeleton-tags">
            <div class="ft-skeleton-tag"></div>
            <div class="ft-skeleton-tag ft-skeleton-tag-sm"></div>
            <div class="ft-skeleton-tag"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
defineProps({
  count: {
    type: Number,
    default: 12
  }
})

const paws = ['ü¶ä', 'ü¶ù', 'üê±', 'üê∫', 'üê≤']
</script>

<style scoped>
/* ===================================================
   SKELETON ‚Äî CSS COLUMNS MASONRY
   =================================================== */

.ft-loading-skeleton {
  /* –ü–ª–∞–≤–Ω—ã–π pulse –≤—Å–µ–≥–æ –±–ª–æ–∫–∞ */
}

/* CSS columns ‚Äî –º–∞—Å–æ–Ω—Ä–∏ –±–µ–∑ JS */
.ft-skeleton-grid {
  columns: 3;
  column-gap: 1.5rem;
  column-fill: balance;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –ø–æ –∫–æ–ª–æ–Ω–∫–∞–º */
.ft-skeleton-card {
  break-inside: avoid;
  display: inline-block;
  width: 100%;
  margin-bottom: 1.5rem;

  background: rgba(255, 255, 255, 0.03);
  border-radius: 1rem;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.05);

  /* Staggered fade-in */
  animation: skFadeIn 0.4s ease-out both;
  animation-delay: calc(var(--sk-index, 0) * 50ms);
}

@keyframes skFadeIn {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ===================================================
   –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ï ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –¥–ª—è masonry
   =================================================== */

.ft-skeleton-image {
  position: relative;
  background: linear-gradient(
    110deg,
    rgba(255, 255, 255, 0.04) 30%,
    rgba(255, 255, 255, 0.09) 50%,
    rgba(255, 255, 255, 0.04) 70%
  );
  background-size: 300% 100%;
  animation: shimmer 1.8s linear infinite;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—ã—Å–æ—Ç—ã ‚Äî —Å–∏–º—É–ª–∏—Ä—É—é—Ç masonry */
.ft-skeleton-img-1 { height: 220px; }
.ft-skeleton-img-2 { height: 300px; }
.ft-skeleton-img-3 { height: 180px; }
.ft-skeleton-img-4 { height: 260px; }
.ft-skeleton-img-5 { height: 240px; }

@keyframes shimmer {
  0%   { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.ft-skeleton-paw {
  font-size: 2.5rem;
  opacity: 0.15;
  animation: float 3.5s ease-in-out infinite;
  user-select: none;
}

@keyframes float {
  0%, 100% { transform: translateY(0) rotate(-5deg); }
  50%       { transform: translateY(-10px) rotate(5deg); }
}

/* ===================================================
   –ö–û–ù–¢–ï–ù–¢
   =================================================== */

.ft-skeleton-content {
  padding: 0.9rem 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}

/* –ë–∞–∑–æ–≤—ã–µ –ø–æ–ª–æ—Å–∫–∏ */
.ft-skeleton-line {
  border-radius: 0.4rem;
  background: linear-gradient(
    110deg,
    rgba(255, 255, 255, 0.04) 30%,
    rgba(255, 255, 255, 0.09) 50%,
    rgba(255, 255, 255, 0.04) 70%
  );
  background-size: 300% 100%;
  animation: shimmer 1.8s linear infinite;
}

.ft-skeleton-line-title {
  height: 1.1rem;
  width: 80%;
  animation-delay: 0.1s;
}

.ft-skeleton-line-subtitle {
  height: 0.9rem;
  width: 55%;
  animation-delay: 0.2s;
}

/* –•—É–¥–æ–∂–Ω–∏–∫-–ø–∏–ª—é–ª—è */
.ft-skeleton-artist-pill {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.4rem 0.65rem;
  background: rgba(76, 175, 80, 0.05);
  border: 1px solid rgba(76, 175, 80, 0.1);
  border-radius: 2rem;
  width: fit-content;
}

.ft-skeleton-avatar {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: linear-gradient(
    110deg,
    rgba(255, 255, 255, 0.06) 30%,
    rgba(255, 255, 255, 0.12) 50%,
    rgba(255, 255, 255, 0.06) 70%
  );
  background-size: 300% 100%;
  animation: shimmer 1.8s linear infinite;
  flex-shrink: 0;
}

.ft-skeleton-line-artist {
  height: 0.8rem;
  width: 70px;
  animation-delay: 0.15s;
}

/* –¢–µ–≥–∏ */
.ft-skeleton-tags {
  display: flex;
  gap: 0.35rem;
  flex-wrap: wrap;
}

.ft-skeleton-tag {
  height: 1.3rem;
  width: 52px;
  border-radius: 1rem;
  background: linear-gradient(
    110deg,
    rgba(255, 123, 37, 0.06) 30%,
    rgba(255, 123, 37, 0.12) 50%,
    rgba(255, 123, 37, 0.06) 70%
  );
  background-size: 300% 100%;
  animation: shimmer 1.8s linear infinite;
  animation-delay: 0.25s;
}

.ft-skeleton-tag-sm {
  width: 38px;
  animation-delay: 0.35s;
}

/* ===================================================
   –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨
   =================================================== */

@media (max-width: 1024px) {
  .ft-skeleton-grid {
    columns: 2;
    column-gap: 1.25rem;
  }
  .ft-skeleton-card {
    margin-bottom: 1.25rem;
  }
}

@media (max-width: 480px) {
  .ft-skeleton-grid {
    columns: 1;
    column-gap: 0;
  }
  .ft-skeleton-card {
    margin-bottom: 1rem;
  }
}

/* –û—Ç–∫–ª—é—á–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .ft-skeleton-card,
  .ft-skeleton-image,
  .ft-skeleton-line,
  .ft-skeleton-avatar,
  .ft-skeleton-tag {
    animation: none;
  }
}
</style>
